<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>matplotlib on song</title>
    <link>https://chenjiesong.github.io/tags/matplotlib/</link>
    <description>Recent content in matplotlib on song</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Thu, 18 Feb 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://chenjiesong.github.io/tags/matplotlib/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Python matplotlib绘制股票走势图</title>
      <link>https://chenjiesong.github.io/posts/python-matplotlib%E7%BB%98%E5%88%B6%E8%82%A1%E7%A5%A8%E8%B5%B0%E5%8A%BF%E5%9B%BE/</link>
      <pubDate>Thu, 18 Feb 2021 00:00:00 +0000</pubDate>
      
      <guid>https://chenjiesong.github.io/posts/python-matplotlib%E7%BB%98%E5%88%B6%E8%82%A1%E7%A5%A8%E8%B5%B0%E5%8A%BF%E5%9B%BE/</guid>
      <description>matplotlib中通过pyplot模块进行图表的绘制。所绘制的图表称为一个绘图对象，在绘图对象之上绘制各种图形。由于K线图主要是基于日期和股票价格的X-Y坐标轴结构，因此本系列文章也主要针对axes坐标轴绘制进行分析。 通过如下语句导入需要绘图的库：.
import matplotlib.pyplot as plt 1. figure对象 figure对象可以看成整个图表。在figure图表之上增加多个子图，然后在子图之上绘制点和线。
fig = plt.figure() ax = fig.add_subplot(1,1,1) 得到fig对象之后，通过add_subplot增加子图（返回了一个axes坐标轴），该方法需要三个参数，分别为：numrows, numcols, fignum。其中，一共有numrowsnumcols个子图，即：将图表分为N行M列，fignum标识了该子图的顺序，其范围从1到numrowsnumcols。在上例中1,1,1表示了该绘图对象仅有1个子图，也就是11类型。
2. plot方法绘图 创建子图之后，通过plot方法在子图上绘制。plot方法可以传入两个list，分别表示X和Y坐标，因此x和y的长度要一致。需要注意的是，plot也可以接受一个list参数作为Y坐标的值，默认X坐标的值从0开始到Y的长度。
plt.plot([1,2,3,4]) 其中X坐标为0到3，个数与Y坐标值的数目相同。
plt.plot([1,2,3,4], [1,2,3,4]) 设置了X坐标的值。然后通过plot.show()显示该图，示例代码如下：
def PlotDemo1(): fig = plt.figure() ax = fig.add_subplot(1,1,1) ax.plot([1,2,3,4],[2,3,4,5]) plt.show() 上述图表作为基础，以后我们都是围绕这个基础图表不断添加元素，直到达到我们想要的效果。
2.1 增加标题和坐标轴说明 如果需要给绘图对象增加标题，可以通过suptitle方法设置，其中可以设置参数：标题、标题字体大小、字体类型等。代码示例如下：
fig.suptitle(&amp;#39;figure title demo&amp;#39;, fontsize = 14, fontweight=&amp;#39;bold&amp;#39;) 如果需要对给定子图的坐标轴设置标题，可以通过刚才返回的axes对象的set_title进行设置，代码示例如下：
ax.set_title(&amp;#34;axes title&amp;#34;) 如果需要对于X和Y坐标设置标签，可以通过set_xlabel和set_ylabel方法设置。代码示例如下：
ax.set_xlabel(&amp;#34;x label&amp;#34;) ax.set_ylabel(&amp;#34;y label&amp;#34;) 通过上述的示例，我们绘制了一个基本的X和Y坐标轴，并增加了针对坐标轴的说明。
三、股价基本走势图 股票的K线图（以日K为例）由日期和价格组成，形成X-Y坐标轴，按照前面的绘图方案，需要传入日期数组和价格数组即可。 1.numpy数组 numpy是常用的数据处理库，我将000001.SZ的股价数据（时间范围从20150101到20150930）导入到csv中，然后通过numpy读取得到日期和价格数组。csv文件中包含了两列，日期和价格，分割符号为&amp;quot;,&amp;quot;，读取过程代码如下：
dates, close = np.loadtxt(filename,delimiter=&amp;#34;,&amp;#34;, unpack= True, converters={0:mdates.strpdate2num(&amp;#39;%Y-%m-%d&amp;#39;)}) 　numpy的loadtxt方法：设定了文件中的分隔符号为“，”，unpack是否将数组拆分，True为拆分，即：得到两个数组分别表示日期和收盘价格，converters是将日期类型的字符串转为数组，因为numpy规定其数组中的类型需要一致。 2.</description>
    </item>
    
  </channel>
</rss>
